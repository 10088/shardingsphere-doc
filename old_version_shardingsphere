commit 3a1c54d096f525c23835412a5a4068b16d28db82
Author: Liang Zhang <terrymanu@163.com>
Date:   Sun Aug 29 21:43:02 2021 +0800

    Use transaction rule instead of props (#12090)
    
    * Add transaction configuration
    
    * Use transaction rule to process default transaction type
    
    * Use transaction rule to process default transaction type
    
    * Use transaction rule to process xa-transaction-manager-type

diff --git a/docs/document/content/features/test-engine/performance-test-sysbench.cn.md b/docs/document/content/features/test-engine/performance-test-sysbench.cn.md
index 0ae7165f74..4b7349431c 100644
--- a/docs/document/content/features/test-engine/performance-test-sysbench.cn.md
+++ b/docs/document/content/features/test-engine/performance-test-sysbench.cn.md
@@ -311,10 +311,6 @@ props:
   max-connections-size-per-query: 10
   executor-size: 128  # Infinite by default.
   proxy-frontend-flush-threshold: 128  # The default value is 128.
-    # LOCAL: Proxy will run with LOCAL transaction.
-    # XA: Proxy will run with XA transaction.
-    # BASE: Proxy will run with B.A.S.E transaction.
-  proxy-transaction-type: LOCAL
   proxy-opentracing-enabled: false
   proxy-hint-enabled: false
   sql-show: false
diff --git a/docs/document/content/features/test-engine/performance-test-sysbench.en.md b/docs/document/content/features/test-engine/performance-test-sysbench.en.md
index c77b77187b..35464dec82 100644
--- a/docs/document/content/features/test-engine/performance-test-sysbench.en.md
+++ b/docs/document/content/features/test-engine/performance-test-sysbench.en.md
@@ -311,10 +311,6 @@ props:
   max-connections-size-per-query: 10
   executor-size: 128  # Infinite by default.
   proxy-frontend-flush-threshold: 128  # The default value is 128.
-    # LOCAL: Proxy will run with LOCAL transaction.
-    # XA: Proxy will run with XA transaction.
-    # BASE: Proxy will run with B.A.S.E transaction.
-  proxy-transaction-type: LOCAL
   proxy-opentracing-enabled: false
   proxy-hint-enabled: false
   sql-show: false
diff --git a/docs/document/content/others/api-change-history/shardingsphere-proxy/_index.en.md b/docs/document/content/others/api-change-history/shardingsphere-proxy/_index.en.md
index 3f0b7a9ac4..75298e4fc9 100644
--- a/docs/document/content/others/api-change-history/shardingsphere-proxy/_index.en.md
+++ b/docs/document/content/others/api-change-history/shardingsphere-proxy/_index.en.md
@@ -23,11 +23,6 @@ props:
   max-connections-size-per-query: 1
   executor-size: 16  # Infinite by default.
   proxy-frontend-flush-threshold: 128  # The default value is 128.
-    # LOCAL: Proxy will run with LOCAL transaction.
-    # XA: Proxy will run with XA transaction.
-    # BASE: Proxy will run with B.A.S.E transaction.
-  proxy-transaction-type: LOCAL
-  xa-transaction-manager-type: Atomikos
   proxy-opentracing-enabled: false
   proxy-hint-enabled: false
   query-with-cipher-column: true
diff --git a/docs/document/content/user-manual/shardingsphere-jdbc/configuration/props.cn.md b/docs/document/content/user-manual/shardingsphere-jdbc/configuration/props.cn.md
index befbd3a930..894e894ddf 100644
--- a/docs/document/content/user-manual/shardingsphere-jdbc/configuration/props.cn.md
+++ b/docs/document/content/user-manual/shardingsphere-jdbc/configuration/props.cn.md
@@ -17,5 +17,4 @@ Apache ShardingSphere 提供属性配置的方式配置系统级配置。
 | executor-size (?)                  | int        | 用于设置任务处理线程池的大小。每个 ShardingSphereDataSource 使用一个独立的线程池，同一个 JVM 的不同数据源不共享线程池。                                                                         | infinite |
 | max-connections-size-per-query (?) | int        | 一次查询请求在每个数据库实例中所能使用的最大连接数。                                                                                                                                     | 1        |
 | check-table-metadata-enabled (?)   | boolean    | 在程序启动和更新时，是否检查分片元数据的结构一致性。                                                                                                                                     | false    |
-| xa-transaction-manager-type (?)    | String     | XA 事务管理器类型。例如：Atomikos，Narayana，Bitronix                                                                                                                               | Atomikos |
 | check-duplicate-table-enabled (?)  | boolean    | 在程序启动和更新时，是否检查重复表。                                                                                                                                                  | false    |
diff --git a/docs/document/content/user-manual/shardingsphere-jdbc/configuration/props.en.md b/docs/document/content/user-manual/shardingsphere-jdbc/configuration/props.en.md
index 1bfb1c3e78..34232fe827 100644
--- a/docs/document/content/user-manual/shardingsphere-jdbc/configuration/props.en.md
+++ b/docs/document/content/user-manual/shardingsphere-jdbc/configuration/props.en.md
@@ -17,5 +17,4 @@ Apache ShardingSphere provides the way of property configuration to configure sy
 | executor-size (?)                  | int         | The max thread size of worker group to execute SQL. One ShardingSphereDataSource will use a independent thread pool, it does not share thread pool even different data source in same JVM.                                                                   | infinite        |
 | max-connections-size-per-query (?) | int         | Max opened connection size for each query.                                                                                                                                                                                                                   | 1               |
 | check-table-metadata-enabled (?)   | boolean     | Whether validate table meta data consistency when application startup or updated.                                                                                                                                                                            | false           |
-| xa-transaction-manager-type (?)    | String      | XA Transaction manager type. Include: Atomikos, Narayana and Bitronix.                                                                                                                                                                                       | Atomikos        |
 | check-duplicate-table-enabled (?)  | boolean     | Whether validate duplicate table when application startup or updated.                                                                                                                                                                                        | false           |
diff --git a/docs/document/content/user-manual/shardingsphere-jdbc/usage/transaction/bitronix.cn.md b/docs/document/content/user-manual/shardingsphere-jdbc/usage/transaction/bitronix.cn.md
index 5332c707a2..482e13f4b0 100644
--- a/docs/document/content/user-manual/shardingsphere-jdbc/usage/transaction/bitronix.cn.md
+++ b/docs/document/content/user-manual/shardingsphere-jdbc/usage/transaction/bitronix.cn.md
@@ -45,8 +45,10 @@ weight = 6
 Yaml:
 
 ```yaml
-props:
-  xa-transaction-manager-type: Bitronix
+- !TRANSACTION
+  defaultType: XA
+    props:
+      xa-transaction-manager-type: Bitronix
 ```
 
 SpringBoot:
diff --git a/docs/document/content/user-manual/shardingsphere-jdbc/usage/transaction/bitronix.en.md b/docs/document/content/user-manual/shardingsphere-jdbc/usage/transaction/bitronix.en.md
index 44a2921bcf..1ca9b1c5cb 100644
--- a/docs/document/content/user-manual/shardingsphere-jdbc/usage/transaction/bitronix.en.md
+++ b/docs/document/content/user-manual/shardingsphere-jdbc/usage/transaction/bitronix.en.md
@@ -44,8 +44,10 @@ Please refer to [Bitronix official documentation](https://github.com/bitronix/bt
 Yaml:
 
 ```yaml
-props:
-  xa-transaction-manager-type: Bitronix
+- !TRANSACTION
+  defaultType: XA
+    props:
+      xa-transaction-manager-type: Bitronix
 ```
 
 SpringBoot:
diff --git a/docs/document/content/user-manual/shardingsphere-jdbc/usage/transaction/narayana.cn.md b/docs/document/content/user-manual/shardingsphere-jdbc/usage/transaction/narayana.cn.md
index 0333903cc0..611282b10b 100644
--- a/docs/document/content/user-manual/shardingsphere-jdbc/usage/transaction/narayana.cn.md
+++ b/docs/document/content/user-manual/shardingsphere-jdbc/usage/transaction/narayana.cn.md
@@ -63,8 +63,10 @@ weight = 5
 Yaml:
 
 ```yaml
-props:
-  xa-transaction-manager-type: Narayana
+- !TRANSACTION
+  defaultType: XA
+    props:
+      xa-transaction-manager-type: Narayana
 ```
 
 SpringBoot:
diff --git a/docs/document/content/user-manual/shardingsphere-jdbc/usage/transaction/narayana.en.md b/docs/document/content/user-manual/shardingsphere-jdbc/usage/transaction/narayana.en.md
index 8f42e276a4..ce822e4e4e 100644
--- a/docs/document/content/user-manual/shardingsphere-jdbc/usage/transaction/narayana.en.md
+++ b/docs/document/content/user-manual/shardingsphere-jdbc/usage/transaction/narayana.en.md
@@ -63,8 +63,10 @@ Please refer to [Narayana official documentation](https://narayana.io/documentat
 Yaml:
 
 ```yaml
-props:
-  xa-transaction-manager-type: Narayana
+- !TRANSACTION
+  defaultType: XA
+    props:
+      xa-transaction-manager-type: Narayana
 ```
 
 SpringBoot:
diff --git a/docs/document/content/user-manual/shardingsphere-proxy/configuration/props.cn.md b/docs/document/content/user-manual/shardingsphere-proxy/configuration/props.cn.md
index 13021a2ef0..7ed6efdbb4 100644
--- a/docs/document/content/user-manual/shardingsphere-proxy/configuration/props.cn.md
+++ b/docs/document/content/user-manual/shardingsphere-proxy/configuration/props.cn.md
@@ -18,8 +18,6 @@ Apache ShardingSphere 提供属性配置的方式配置系统级配置。
 | max-connections-size-per-query (?) | int         | 一次查询请求在每个数据库实例中所能使用的最大连接数。                                                                                                                                     | 1        |
 | check-table-metadata-enabled (?)   | boolean     | 在程序启动和更新时，是否检查分片元数据的结构一致性。                                                                                                                                      | false    |
 | proxy-frontend-flush-threshold (?) | int         | 在 ShardingSphere-Proxy 中设置传输数据条数的 IO 刷新阈值。                                                                                                                            | 128      |
-| proxy-transaction-type (?)         | String      | ShardingSphere-Proxy 中使用的默认事务类型。包括：LOCAL、XA 和 BASE。                                                                                                                   | LOCAL    |
 | proxy-opentracing-enabled (?)      | boolean     | 是否允许在 ShardingSphere-Proxy 中使用 OpenTracing。                                                                                                                                | false    |
 | proxy-hint-enabled (?)             | boolean     | 是否允许在 ShardingSphere-Proxy 中使用 Hint。使用 Hint 会将 Proxy 的线程处理模型由 IO 多路复用变更为每个请求一个独立的线程，会降低 Proxy 的吞吐量。                                              | false    |
-| xa-transaction-manager-type (?)    | String      | XA 事务管理器类型。例如：Atomikos，Narayana，Bitronix。                                                                                                                               | Atomikos |
 | check-duplicate-table-enabled (?)  | boolean     | 在程序启动和更新时，是否检查重复表。                                                                                                                                                   | false    |
diff --git a/docs/document/content/user-manual/shardingsphere-proxy/configuration/props.en.md b/docs/document/content/user-manual/shardingsphere-proxy/configuration/props.en.md
index 0a4bfe4dd1..a3da4ff9c3 100644
--- a/docs/document/content/user-manual/shardingsphere-proxy/configuration/props.en.md
+++ b/docs/document/content/user-manual/shardingsphere-proxy/configuration/props.en.md
@@ -18,8 +18,6 @@ Apache ShardingSphere provides the way of property configuration to configure sy
 | max-connections-size-per-query (?) | int         | Max opened connection size for each query.                                                                                                                                                                                                                   | 1               |
 | check-table-metadata-enabled (?)   | boolean     | Whether validate table meta data consistency when application startup or updated.                                                                                                                                                                            | false           |
 | proxy-frontend-flush-threshold (?) | int         | Flush threshold for every records from databases for ShardingSphere-Proxy.                                                                                                                                                                                   | 128             |
-| proxy-transaction-type (?)         | String      | Default transaction type of ShardingSphere-Proxy. Include: LOCAL, XA and BASE.                                                                                                                                                                               | LOCAL           |
 | proxy-opentracing-enabled (?)      | boolean     | Whether enable opentracing for ShardingSphere-Proxy.                                                                                                                                                                                                         | false           |
 | proxy-hint-enabled (?)             | boolean     | Whether enable hint for ShardingSphere-Proxy. Using Hint will switch proxy thread mode from IO multiplexing to per connection per thread, which will reduce system throughput.                                                                               | false           |
-| xa-transaction-manager-type (?)    | String      | XA Transaction manager type. Include: Atomikos, Narayana and Bitronix.                                                                                                                                                                                       | Atomikos        |
 | check-duplicate-table-enabled (?)  | boolean     | Whether validate duplicate table when application startup or updated.                                                                                                                                                                                        | false           |
diff --git a/docs/document/content/user-manual/shardingsphere-proxy/usage/transaction.cn.md b/docs/document/content/user-manual/shardingsphere-proxy/usage/transaction.cn.md
index 3894a639fb..d67b0d0d22 100644
--- a/docs/document/content/user-manual/shardingsphere-proxy/usage/transaction.cn.md
+++ b/docs/document/content/user-manual/shardingsphere-proxy/usage/transaction.cn.md
@@ -52,8 +52,10 @@ ShardingSphere-Proxy 接入的分布式事务 API 同 ShardingSphere-JDBC 保持
 2. 在 `conf/server.yaml` 中加入如下配置：
 
 ```yaml
-props:
-   xa-transaction-manager-type: Narayana
+- !TRANSACTION
+  defaultType: XA
+    props:
+      xa-transaction-manager-type: Narayana
 ```
 
 3. 新增 `jbossts-properties.xml` 文件来定制化 Narayana 配置项，它的加载路径顺序：`user.dir (pwd)` > `user.home` > `java.home` > `classpath`。
@@ -84,8 +86,10 @@ props:
 2. 在 `conf/server.yaml` 中加入如下配置：
 
 ```yaml
-props:
-   xa-transaction-manager-type: Bitronix
+- !TRANSACTION
+  defaultType: XA
+    props:
+      xa-transaction-manager-type: Bitronix
 ```
 
 3. Bitronix 配置详情请参见[Bitronix官方文档](https://github.com/bitronix/btm/wiki)。
diff --git a/docs/document/content/user-manual/shardingsphere-proxy/usage/transaction.en.md b/docs/document/content/user-manual/shardingsphere-proxy/usage/transaction.en.md
index dff4d77e1c..4ba0d5aaca 100644
--- a/docs/document/content/user-manual/shardingsphere-proxy/usage/transaction.en.md
+++ b/docs/document/content/user-manual/shardingsphere-proxy/usage/transaction.en.md
@@ -44,8 +44,10 @@ Default XA transaction manager of ShardingSphere is Atomikos. Users can customiz
 2. Configure `xa-transaction-manager-type` in `conf/server.yaml`：
 
 ```yaml
-props:
-  xa-transaction-manager-type: Narayana
+- !TRANSACTION
+  defaultType: XA
+    props:
+      xa-transaction-manager-type: Narayana
 ```
 
 3. Add `jbossts-properties.xml` to customize Narayana configuration.
@@ -77,8 +79,10 @@ Please refer to [Narayana official documentation](https://narayana.io/documentat
 2. Configure `xa-transaction-manager-type` in `conf/server.yaml`：
 
 ```yaml
-props:
-  xa-transaction-manager-type: Bitronix
+- !TRANSACTION
+  defaultType: XA
+    props:
+      xa-transaction-manager-type: Bitronix
 ```
 
 3. Please refer to [Bitronix official documentation](https://github.com/bitronix/btm/wiki) for more details.
