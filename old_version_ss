commit 8d558df1843dc07e8420f071e0f57f3f00ce4bdb
Author: jiangML <1060319118@qq.com>
Date:   Mon Sep 26 00:19:22 2022 +0800

    Refactor the agent.yaml configuration file #21067 (#21118)
    
    * Refactor: refactor the agent.yaml configuration file
    
    * Adjust the format of the agent.yaml configuration parameter
    
    * Update observability documentation
    
    * Add metrics documentation
    
    * Adjust SQLRouteEngineAdvice to fit SQLRouteEngine
    
    * Modify the jaeger system property to uppercase
    
    * Optimize code and documentation
    
    * Update the observability documentation
    
    * Update the observability documentation
    
    * Remove duplicate checksums

diff --git a/docs/document/content/user-manual/shardingsphere-proxy/observability/_index.cn.md b/docs/document/content/user-manual/shardingsphere-proxy/observability/_index.cn.md
index d94229f77d6..e9ca8ed047b 100644
--- a/docs/document/content/user-manual/shardingsphere-proxy/observability/_index.cn.md
+++ b/docs/document/content/user-manual/shardingsphere-proxy/observability/_index.cn.md
@@ -40,66 +40,60 @@ tree
 * 配置说明
 
 `conf/agent.yaml` 用于管理 agent 配置。
-内置插件包括 Jaeger、OpenTracing、Zipkin、OpenTelemetry、Logging 及 Prometheus。
-当需要开启插件时，只需要移除 `ignoredPluginNames` 中对应的插件名称即可。
+内置插件包括 Jaeger、OpenTracing、Zipkin、OpenTelemetry、BaseLogging 及 Prometheus。
+默认不开启任何插件。
 
 ```yaml
-applicationName: shardingsphere-agent
-ignoredPluginNames:
-  - Jaeger
-  - OpenTracing
-  - Zipkin
-  - OpenTelemetry
-  - Logging
-  - Prometheus
-
 plugins:
-  Prometheus:
-    host:  "localhost"
-    port: 9090
-    props:
-      JVM_INFORMATION_COLLECTOR_ENABLED : "true"
-  Jaeger:
-    host: "localhost"
-    port: 5775
-    props:
-      SERVICE_NAME: "shardingsphere-agent"
-      JAEGER_SAMPLER_TYPE: "const"
-      JAEGER_SAMPLER_PARAM: "1"
-  Zipkin:
-    host: "localhost"
-    port: 9411
-    props:
-      SERVICE_NAME: "shardingsphere-agent"
-      URL_VERSION: "/api/v2/spans"
-      SAMPLER_TYPE: "const"
-      SAMPLER_PARAM: "1"
-  OpenTracing:
-    props:
-      OPENTRACING_TRACER_CLASS_NAME: "org.apache.skywalking.apm.toolkit.opentracing.SkywalkingTracer"
-  OpenTelemetry:
-    props:
-      otel.resource.attributes: "service.name=shardingsphere-agent"
-      otel.traces.exporter: "zipkin"
-  Logging:
-    props:
-      LEVEL: "INFO"
-
+#  logging:
+#    BaseLogging:
+#      props:
+#        level: "INFO"
+#  metrics:
+#    Prometheus:
+#      host:  "localhost"
+#      port: 9090
+#      props:
+#        jvm-information-collector-enabled: "true"
+#  tracing:
+#    Jaeger:
+#      host: "localhost"
+#      port: 5775
+#      props:
+#        service-name: "shardingsphere"
+#        jaeger-sampler-type: "const"
+#        jaeger-sampler-param: "1"
+#    Zipkin:
+#      host: "localhost"
+#      port: 9411
+#      props:
+#        service-name: "shardingsphere"
+#        url-version: "/api/v2/spans"
+#        sampler-type: "const"
+#        sampler-param: "1"
+#    OpenTracing:
+#      props:
+#        opentracing-tracer-class-name: "org.apache.skywalking.apm.toolkit.opentracing.SkywalkingTracer"
+#    OpenTelemetry:
+#      props:
+#        otel-resource-attributes: "service.name=shardingsphere"
+#        otel-traces-exporter: "zipkin"
 ```
 * 参数说明；
 
-| 名称       | 说明     |取值范围    |默认值     |
-| :--------- | :-------- |:--------- | :-------- |
-| JVM_INFORMATION_COLLECTOR_ENABLED      | 是否开启 JVM 采集器 |true、false|true|
-| SERVICE_NAME      | 链路跟踪的服务名称 | 自定义 | shardingsphere-agent |
-| JAEGER_SAMPLER_TYPE | Jaeger 采样率类型 | const、probabilistic、ratelimiting、remote | const |
-| JAEGER_SAMPLER_PARAM  | Jaeger 采样率参数 |const：0、1，probabilistic：0.0 - 1.0，ratelimiting：> 0，自定义每秒采集数量，remote：需要自定义配置远程采样率管理服务地址，JAEGER_SAMPLER_MANAGER_HOST_PORT |1（const 类型）|
-| SAMPLER_TYPE  | Zipkin 采样率类型 |const、counting、ratelimiting、boundary | const |
-| SAMPLER_PARAM | Zipkin 采样率参数 |const： 0、1，counting：0.01 - 1.0，ratelimiting：> 0，自定义每秒采集数量，boundary: 0.0001 - 1.0 | 1（const 类型）|
-| otel.resource.attributes|opentelemetry 资源属性 | 字符串键值对（,分割） | service.name=shardingsphere-agent |
-| otel.traces.exporter | Tracing expoter | zipkin、jaeger | zipkin |
-| otel.traces.sampler | opentelemetry 采样率类型 | always_on、always_off、traceidratio | always_on |
-| otel.traces.sampler.arg | opentelemetry 采样率参数 | traceidratio：0.0 - 1.0 | 1.0 |
+| 名称                                | 说明                  |取值范围    | 默认值                               |
+|:----------------------------------|:--------------------|:--------- |:----------------------------------|
+| jvm-information-collector-enabled | 是否开启 JVM 采集器        |true、false| true                              |
+| service-name                      | 链路跟踪的服务名称           | 自定义 | shardingsphere                    |
+| jaeger-sampler-type               | Jaeger 采样率类型        | const、probabilistic、ratelimiting、remote | const                             |
+| jaeger-sampler-param              | Jaeger 采样率参数        |const：0、1，probabilistic：0.0 - 1.0，ratelimiting：> 0，自定义每秒采集数量，remote：需要自定义配置远程采样率管理服务地址，JAEGER_SAMPLER_MANAGER_HOST_PORT | 1（const 类型）                       |
+| url-version                       | Zipkin url 地址       | 自定义 | /api/v2/spans                    |
+| sampler-type                      | Zipkin 采样率类型        |const、counting、ratelimiting、boundary | const                             |
+| sampler-param                     | Zipkin 采样率参数        |const： 0、1，counting：0.01 - 1.0，ratelimiting：> 0，自定义每秒采集数量，boundary: 0.0001 - 1.0 | 1（const 类型）                       |
+| otel-resource-attributes          | opentelemetry 资源属性  | 字符串键值对（,分割） | service.name=shardingsphere-agent |
+| otel-traces-exporter              | Tracing expoter     | zipkin、jaeger | zipkin                            |
+| otel-traces-sampler               | opentelemetry 采样率类型 | always_on、always_off、traceidratio | always_on                         |
+| otel-traces-sampler-arg           | opentelemetry 采样率参数 | traceidratio：0.0 - 1.0 | 1.0                               |
 
 ## ShardingSphere-Proxy 中使用
 
@@ -117,3 +111,34 @@ nohup java ${JAVA_OPTS} ${JAVA_MEM_OPTS} \
 bin/start.sh
 ```
 正常启动后，可以在 ShardingSphere-Proxy 日志中找到 plugin 的加载信息，访问 Proxy 后，可以通过配置的监控地址查看到 `Metric` 和 `Tracing` 的数据。
+
+
+## Metrics
+| 指标名称                              | 类型         | 描述                                                     |
+|:----------------------------------|:-----------|:-------------------------------------------------------|
+| proxy_request_total               | COUNTER    | 请求总数                                                   |
+| proxy_connection_total            | GAUGE      | 当前连接总数                                                 |
+| proxy_execute_latency_millis      | HISTOGRAM  | 执行耗时毫秒                                                 |
+| proxy_execute_error_total         | COUNTER    | 执行异常总数                                                 |
+| route_sql_select_total            | COUNTER    | 路由执行 select SQL 语句总数                                   |
+| route_sql_insert_total            | COUNTER    | 路由执行 insert SQL 语句总数                                   |
+| route_sql_update_total            | COUNTER    | 路由执行 update SQL 语句总数                                   |
+| route_sql_delete_total            | COUNTER    | 路由执行 delete SQL 语句总数                                   |
+| route_datasource_total            | COUNTER    | 数据源路由总数                                                |
+| route_table_total                 | COUNTER    | 表路由数                                                   |
+| proxy_transaction_commit_total    | COUNTER    | 事务提交次数                                                 |
+| proxy_transaction_rollback_total  | COUNTER    | 事务回滚次数                                                 |
+| parse_sql_dml_insert_total        | COUNTER    | 解析 insert SQL 语句总数                                     |
+| parse_sql_dml_delete_total        | COUNTER    | 解析 delete SQL 语句总数                                     |
+| parse_sql_dml_update_total        | COUNTER    | 解析 update SQL 语句总数                                     |
+| parse_sql_dml_select_total        | COUNTER    | 解析 select SQL 语句总数                                     |
+| parse_sql_ddl_total               | COUNTER    | 解析 DDL SQL 语句总数                                        |
+| parse_sql_dcl_total               | COUNTER    | 解析 DCL SQL 语句总数                                        |
+| parse_sql_dal_total               | COUNTER    | 解析 DAL SQL 语句总数                                        |
+| parse_sql_tcl_total               | COUNTER    | 解析 TCL SQL 语句总数                                        |
+| parse_dist_sql_rql_total          | COUNTER    | 解析 RQL 类型 DistSQL 总数                                   |
+| parse_dist_sql_rdl_total          | COUNTER    | 解析 RDL 类型 DistSQL 总数                                   |
+| parse_dist_sql_ral_total          | COUNTER    | 解析 RAL 类型 DistSQL 总数                                   |
+| build_info                        | GAUGE      | 构建信息                                                   |
+| proxy_info                        | GAUGE      | proxy 信息， state:1 正常状态， state:2 熔断状态                   |
+| meta_data_info                    | GAUGE      | proxy 元数据信息， schema_count:逻辑库数量， database_count:数据源数量  |
diff --git a/docs/document/content/user-manual/shardingsphere-proxy/observability/_index.en.md b/docs/document/content/user-manual/shardingsphere-proxy/observability/_index.en.md
index f288ce086b0..df5e7620a33 100644
--- a/docs/document/content/user-manual/shardingsphere-proxy/observability/_index.en.md
+++ b/docs/document/content/user-manual/shardingsphere-proxy/observability/_index.en.md
@@ -40,66 +40,60 @@ tree
 * Configuration file
 
 `conf/agent.yaml` is used to manage agent configuration.
-Built-in plugins include Jaeger, OpenTracing, Zipkin, OpenTelemetry, Logging and Prometheus.
-When a plugin needs to be enabled, just remove the corresponding name in `ignoredPluginNames`.
+Built-in plugins include Jaeger, OpenTracing, Zipkin, OpenTelemetry, BaseLogging and Prometheus.
+No plugin is enabled by default.
 
 ```yaml
-applicationName: shardingsphere-agent
-ignoredPluginNames:
-  - Jaeger
-  - OpenTracing
-  - Zipkin
-  - OpenTelemetry
-  - Logging
-  - Prometheus
-
 plugins:
-  Prometheus:
-    host:  "localhost"
-    port: 9090
-    props:
-      JVM_INFORMATION_COLLECTOR_ENABLED : "true"
-  Jaeger:
-    host: "localhost"
-    port: 5775
-    props:
-      SERVICE_NAME: "shardingsphere-agent"
-      JAEGER_SAMPLER_TYPE: "const"
-      JAEGER_SAMPLER_PARAM: "1"
-  Zipkin:
-    host: "localhost"
-    port: 9411
-    props:
-      SERVICE_NAME: "shardingsphere-agent"
-      URL_VERSION: "/api/v2/spans"
-      SAMPLER_TYPE: "const"
-      SAMPLER_PARAM: "1"
-  OpenTracing:
-    props:
-      OPENTRACING_TRACER_CLASS_NAME: "org.apache.skywalking.apm.toolkit.opentracing.SkywalkingTracer"
-  OpenTelemetry:
-    props:
-      otel.resource.attributes: "service.name=shardingsphere-agent"
-      otel.traces.exporter: "zipkin"
-  Logging:
-    props:
-      LEVEL: "INFO"
-
+#  logging:
+#    BaseLogging:
+#      props:
+#        level: "INFO"
+#  metrics:
+#    Prometheus:
+#      host:  "localhost"
+#      port: 9090
+#      props:
+#        jvm-information-collector-enabled: "true"
+#  tracing:
+#    Jaeger:
+#      host: "localhost"
+#      port: 5775
+#      props:
+#        service-name: "shardingsphere"
+#        jaeger-sampler-type: "const"
+#        jaeger-sampler-param: "1"
+#    Zipkin:
+#      host: "localhost"
+#      port: 9411
+#      props:
+#        service-name: "shardingsphere"
+#        url-version: "/api/v2/spans"
+#        sampler-type: "const"
+#        sampler-param: "1"
+#    OpenTracing:
+#      props:
+#        opentracing-tracer-class-name: "org.apache.skywalking.apm.toolkit.opentracing.SkywalkingTracer"
+#    OpenTelemetry:
+#      props:
+#        otel-resource-attributes: "service.name=shardingsphere"
+#        otel-traces-exporter: "zipkin"
 ```
 * Parameter description:
 
-| Name       |  Description     |  Value range    |  Default value     |
-| :--------- | :-------- |:--------- | :-------- |
-| JVM_INFORMATION_COLLECTOR_ENABLED      | Start JVM collector |  true, false  |  true  |
-| SERVICE_NAME      | Tracking service name | Custom | shardingsphere-agent |
-| JAEGER_SAMPLER_TYPE | Jaeger sample rate type | const, probabilistic, ratelimiting, remote | const |
-| JAEGER_SAMPLER_PARAM  | Jaeger sample rate parameter |const:0, 1, probabilistic:0.0 - 1.0, ratelimiting: > 0, Customize the number of acquisitions per second, remote：need to customize the remote service addres,JAEGER_SAMPLER_MANAGER_HOST_PORT | 1 (const type) |
-| SAMPLER_TYPE  | Zipkin sample rate type | const, counting, ratelimiting, boundary | const |
-| SAMPLER_PARAM | Zipkin sampling rate parameter |const:0, 1, counting:0.01 - 1.0, ratelimiting: > 0, boundary:0.0001 - 1.0 | 1 (const type) |
-| otel.resource.attributes | opentelemetry properties | String key value pair (, split) | service.name=shardingsphere-agent |
-| otel.traces.exporter | Tracing expoter | zipkin, jaeger | zipkin |
-| otel.traces.sampler | Opentelemetry sample rate type | always_on, always_off, traceidratio | always_on |
-| otel.traces.sampler.arg | Opentelemetry sample rate parameter | traceidratio：0.0 - 1.0 | 1.0 |
+| Name                              | Description                         |  Value range    |  Default value     |
+|:----------------------------------|:------------------------------------|:--------- | :-------- |
+| jvm-information-collector-enabled | Start JVM collector                 |  true, false  |  true  |
+| service-name                      | Tracking service name               | Custom | shardingsphere-agent |
+| jaeger-sampler-type               | Jaeger sample rate type             | const, probabilistic, ratelimiting, remote | const |
+| jaeger-sampler-param              | Jaeger sample rate parameter        |const:0, 1, probabilistic:0.0 - 1.0, ratelimiting: > 0, Customize the number of acquisitions per second, remote：need to customize the remote service addres,JAEGER_SAMPLER_MANAGER_HOST_PORT | 1 (const type) |
+| url-version                       | Zipkin url address                  | Custom | /api/v2/spans                    |
+| sampler-type                      | Zipkin sample rate type             | const, counting, ratelimiting, boundary | const |
+| sampler-param                     | Zipkin sampling rate parameter      |const:0, 1, counting:0.01 - 1.0, ratelimiting: > 0, boundary:0.0001 - 1.0 | 1 (const type) |
+| otel-resource-attributes          | opentelemetry properties            | String key value pair (, split) | service.name=shardingsphere-agent |
+| otel-traces-exporter              | Tracing expoter                     | zipkin, jaeger | zipkin |
+| otel-traces-sampler               | Opentelemetry sample rate type      | always_on, always_off, traceidratio | always_on |
+| otel-traces-sampler-arg           | Opentelemetry sample rate parameter | traceidratio：0.0 - 1.0 | 1.0 |
 
 ## Usage in ShardingSphere-Proxy
 
@@ -117,3 +111,34 @@ nohup java ${JAVA_OPTS} ${JAVA_MEM_OPTS} \
 bin/start.sh
 ```
 After startup, you can find the plugin info in the log of ShardingSphere-Proxy, `Metric` and `Tracing` data can be viewed through the configured monitoring address.
+
+
+## Metrics
+| name                             | type       | description                                                                                              |
+|:---------------------------------|:-----------|:---------------------------------------------------------------------------------------------------------|
+| proxy_request_total              | COUNTER    | proxy request total                                                                                      |
+| proxy_connection_total           | GAUGE      | proxy connection total                                                                                   |
+| proxy_execute_latency_millis     | HISTOGRAM  | proxy executor latency millis                                                                            |
+| proxy_execute_error_total        | COUNTER    | proxy executor error total                                                                               |
+| route_sql_select_total           | COUNTER    | proxy executor route select sql total                                                                    |
+| route_sql_insert_total           | COUNTER    | proxy executor route insert sql total                                                                    |
+| route_sql_update_total           | COUNTER    | proxy executor route update sql total                                                                    |
+| route_sql_delete_total           | COUNTER    | proxy executor route delete sql total                                                                    |
+| route_datasource_total           | COUNTER    | number of datasource routed                                                                              |
+| route_table_total                | COUNTER    | number of table routed                                                                                   |
+| proxy_transaction_commit_total   | COUNTER    | transaction commit count total                                                                           |
+| proxy_transaction_rollback_total | COUNTER    | transaction rollback count total                                                                         |
+| parse_sql_dml_insert_total       | COUNTER    | proxy executor parse insert sql total                                                                    |
+| parse_sql_dml_delete_total       | COUNTER    | proxy executor parse delete sql total                                                                    |
+| parse_sql_dml_update_total       | COUNTER    | proxy executor parse update sql total                                                                    |
+| parse_sql_dml_select_total       | COUNTER    | proxy executor parse select sql total                                                                    |
+| parse_sql_ddl_total              | COUNTER    | proxy executor parse ddl sql total                                                                       |
+| parse_sql_dcl_total              | COUNTER    | proxy executor parse dcl sql total                                                                       |
+| parse_sql_dal_total              | COUNTER    | proxy executor parse dal sql total                                                                       |
+| parse_sql_tcl_total              | COUNTER    | proxy executor parse tcl sql total                                                                       |
+| parse_dist_sql_rql_total         | COUNTER    | proxy executor parse rql sql total                                                                       |
+| parse_dist_sql_rdl_total         | COUNTER    | proxy executor parse rdl sql total                                                                       |
+| parse_dist_sql_ral_total         | COUNTER    | proxy executor parse ral sql total                                                                       |
+| build_info                       | GAUGE      | build information                                                                                        |
+| proxy_info                       | GAUGE      | proxy information， state:1 OK， state:2 CIRCUIT BREAK                                                     |
+| meta_data_info                   | GAUGE      | meta data information， schema_count:logic number of databases， database_count:actual number of databases |
\ No newline at end of file
