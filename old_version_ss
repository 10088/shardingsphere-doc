commit fbd77307af63ef2c621bb5cd9b9730b1c944f422
Author: Hongsheng Zhong <sandynz@126.com>
Date:   Mon Oct 18 16:14:38 2021 +0800

    Update scaling doc (#13092)

diff --git a/docs/document/content/features/scaling/use-norms.cn.md b/docs/document/content/features/scaling/use-norms.cn.md
index 037ac2c6a0..bcdb94e6b7 100644
--- a/docs/document/content/features/scaling/use-norms.cn.md
+++ b/docs/document/content/features/scaling/use-norms.cn.md
@@ -11,4 +11,4 @@ weight = 3
 
 ## 不支持项
 
-* 不支持无主键表的扩容和缩容。
+* 不支持无主键表的扩容和缩容，主键必须是单字段。
diff --git a/docs/document/content/features/scaling/use-norms.en.md b/docs/document/content/features/scaling/use-norms.en.md
index 354c73220f..d23bf1e820 100644
--- a/docs/document/content/features/scaling/use-norms.en.md
+++ b/docs/document/content/features/scaling/use-norms.en.md
@@ -11,4 +11,4 @@ weight = 3
 
 ## Unsupported Items
 
-* Do not support to scale tables without primary key.
+* Do not support to scale tables without primary key which must be single column.
diff --git a/docs/document/content/user-manual/shardingsphere-scaling/build.cn.md b/docs/document/content/user-manual/shardingsphere-scaling/build.cn.md
index 2d466ff1cf..a5453114ef 100644
--- a/docs/document/content/user-manual/shardingsphere-scaling/build.cn.md
+++ b/docs/document/content/user-manual/shardingsphere-scaling/build.cn.md
@@ -6,7 +6,7 @@ weight = 1
 
 ## 部署启动
 
-1. 执行以下命令，编译生成 ShardingSphere-Scaling 二进制包：
+1. 执行以下命令，编译生成 ShardingSphere-Scaling 和 ShardingSphere-Proxy 二进制包：
 
 ```
 git clone --depth 1 https://github.com/apache/shardingsphere.git
@@ -14,35 +14,38 @@ cd shardingsphere
 mvn clean install -Dmaven.javadoc.skip=true -Dcheckstyle.skip=true -Drat.skip=true -Djacoco.skip=true -DskipITs -DskipTests -Prelease
 ```
 
-发布包所在目录为：`/shardingsphere-distribution/shardingsphere-scaling-distribution/target/apache-shardingsphere-${latest.release.version}-shardingsphere-scaling-bin.tar.gz`。
+发布包：
+- /shardingsphere-distribution/shardingsphere-scaling-distribution/target/apache-shardingsphere-${latest.release.version}-shardingsphere-scaling-bin.tar.gz
+- /shardingsphere-distribution/shardingsphere-proxy-distribution/target/apache-shardingsphere-${latest.release.version}-shardingsphere-proxy-bin.tar.gz
 
 或者通过[下载页面]( https://shardingsphere.apache.org/document/current/cn/downloads/ )获取安装包。
 
-2. 解压缩发布包，修改配置文件 `conf/server.yaml`，这里主要修改启动端口，保证不与本机其他端口冲突，同时修改断点续传服务（可选）地址即可：
+2. 解压缩 scaling 发布包，修改配置文件 `conf/server.yaml`，这里主要修改启动端口，保证不与本机其他端口冲突，同时修改断点续传服务（可选）地址即可：
 
-```
-port: 8888
-blockQueueSize: 10000
-workerThread: 30
+```yaml
+scaling:
+  port: 8888
+  blockQueueSize: 10000
+  workerThread: 30
 
-resumeBreakPoint:
-  name: scalingJob
-  registryCenter:
+mode:
+  type: Cluster
+  repository:
     type: ZooKeeper
-    serverLists: localhost:2181
     props:
-      retryIntervalMilliseconds: 10000
+      namespace: governance_ds
+      server-lists: localhost:2181
 ```
 
 3. 启动 ShardingSphere-Scaling：
 
 ```
-sh bin/start.sh
+sh bin/server_start.sh
 ```
 
-4. 查看日志 `logs/stdout.log`，确保启动成功。
+4. 查看 scaling 日志 `logs/stdout.log`，确保启动成功。
 
-5. 使用 curl 命令再次确认正常运行。
+5. 使用 curl 命令再次确认 scaling 正常运行。
 
 ```
 curl -X GET http://localhost:8888/scaling/job/list
@@ -54,14 +57,58 @@ curl -X GET http://localhost:8888/scaling/job/list
 {"success":true,"errorCode":0,"errorMsg":null,"model":[]}
 ```
 
-## 结束 ShardingSphere-Scaling
-   
- ```
+6. 解压缩 proxy 发布包，修改配置文件 `conf/server.yaml`，这里主要是开启 `scaling` 和 `mode` 配置：
+```yaml
+scaling:
+  blockQueueSize: 10000
+  workerThread: 40
+  clusterAutoSwitchAlgorithm:
+    type: IDLE
+    props:
+      incremental-task-idle-minute-threshold: 30
+  dataConsistencyCheckAlgorithm:
+    type: DEFAULT
+
+mode:
+  type: Cluster
+  repository:
+    type: ZooKeeper
+    props:
+      namespace: governance_ds
+      server-lists: localhost:2181
+      retryIntervalMilliseconds: 500
+      timeToLiveSeconds: 60
+      maxRetries: 3
+      operationTimeoutMilliseconds: 500
+  overwrite: false
+```
+
+7. 启动 ShardingSphere-Proxy：
+
+```
+sh bin/start.sh
+```
+
+8. 查看 proxy 日志 `logs/stdout.log`，确保启动成功。
+
+## 结束
+
+### ShardingSphere-Scaling
+
+```
+ sh bin/server_stop.sh
+```
+
+### ShardingSphere-Proxy
+
+```
  sh bin/stop.sh
- ```
- 
+```
+
 ## 应用配置项
- 
+
+### ShardingSphere-Scaling
+
 应用现有配置项如下，相应的配置可在 `conf/server.yaml` 中修改：
 
 | 名称           | 说明                                    | 默认值 |
@@ -69,5 +116,4 @@ curl -X GET http://localhost:8888/scaling/job/list
 | port           | HTTP服务监听端口                         | 8888   |
 | blockQueueSize | 数据传输通道队列大小                      | 10000  |
 | workerThread   | 工作线程池大小，允许同时运行的迁移任务线程数 | 30     |
-| resumeBreakPoint   | 断点续传服务                         |        |
  
diff --git a/docs/document/content/user-manual/shardingsphere-scaling/build.en.md b/docs/document/content/user-manual/shardingsphere-scaling/build.en.md
index 11e2d93052..9383ee8903 100644
--- a/docs/document/content/user-manual/shardingsphere-scaling/build.en.md
+++ b/docs/document/content/user-manual/shardingsphere-scaling/build.en.md
@@ -6,7 +6,7 @@ weight = 1
 
 ## Build&Deployment
 
-1. Execute the following command to compile and generate the ShardingSphere-Scaling binary package:
+1. Execute the following command to compile and generate the ShardingSphere-Scaling and ShardingSphere-Proxy binary package:
 
 ```
 git clone --depth 1 https://github.com/apache/shardingsphere.git
@@ -14,35 +14,38 @@ cd shardingsphere
 mvn clean install -Dmaven.javadoc.skip=true -Dcheckstyle.skip=true -Drat.skip=true -Djacoco.skip=true -DskipITs -DskipTests -Prelease
 ```
 
-The binary package's directory is:`/shardingsphere-distribution/shardingsphere-scaling-distribution/target/apache-shardingsphere-${latest.release.version}-shardingsphere-scaling-bin.tar.gz`。
+The binary packages:
+- /shardingsphere-distribution/shardingsphere-scaling-distribution/target/apache-shardingsphere-${latest.release.version}-shardingsphere-scaling-bin.tar.gz
+- /shardingsphere-distribution/shardingsphere-proxy-distribution/target/apache-shardingsphere-${latest.release.version}-shardingsphere-proxy-bin.tar.gz
 
 Or get binary package from [download page]( https://shardingsphere.apache.org/document/current/en/downloads/ ).
 
-2. Unzip the distribution package, modify the configuration file `conf/server.yaml`, we should ensure the port does not conflict with others, and modify the resume from break-point(optional) server lists:
+2. Unzip the scaling distribution package, modify the configuration file `conf/server.yaml`, we should ensure the port does not conflict with others, and modify the resume from break-point(optional) server lists:
 
-```
-port: 8888
-blockQueueSize: 10000
-workerThread: 30
+```yaml
+scaling:
+  port: 8888
+  blockQueueSize: 10000
+  workerThread: 30
 
-resumeBreakPoint:
-  name: scalingJob
-  registryCenter:
+mode:
+  type: Cluster
+  repository:
     type: ZooKeeper
-    serverLists: localhost:2181
     props:
-      retryIntervalMilliseconds: 10000
+      namespace: governance_ds
+      server-lists: localhost:2181
 ```
 
 3. Start up ShardingSphere-Scaling:
 
 ```
-sh bin/start.sh
+sh bin/server_start.sh
 ```
 
-4. See the log file `logs/stdout.log`，ensure startup successfully.
+4. See the scaling log file `logs/stdout.log`，ensure startup successfully.
 
-5. Ensure startup successfully by `curl`.
+5. Ensure scaling startup successfully by `curl`.
 
 ```
 curl -X GET http://localhost:8888/scaling/job/list
@@ -54,19 +57,62 @@ response:
 {"success":true,"errorCode":0,"errorMsg":null,"model":[]}
 ```
 
-## Shutdown ShardingSphere-Scaling
-   
- ```
- sh bin/stop.sh
- ```
- 
+6. Unzip the proxy distribution package, modify the configuration file `conf/server.yaml`, enable `scaling` and `mode`:
+```yaml
+scaling:
+  blockQueueSize: 10000
+  workerThread: 40
+  clusterAutoSwitchAlgorithm:
+    type: IDLE
+    props:
+      incremental-task-idle-minute-threshold: 30
+  dataConsistencyCheckAlgorithm:
+    type: DEFAULT
+
+mode:
+  type: Cluster
+  repository:
+    type: ZooKeeper
+    props:
+      namespace: governance_ds
+      server-lists: localhost:2181
+      retryIntervalMilliseconds: 500
+      timeToLiveSeconds: 60
+      maxRetries: 3
+      operationTimeoutMilliseconds: 500
+  overwrite: false
+```
+
+7. Start up ShardingSphere-Proxy:
+
+```
+sh bin/start.sh
+```
+
+8. See the proxy log file `logs/stdout.log`，ensure startup successfully.
+
+## Shutdown
+
+### ShardingSphere-Scaling
+
+```
+sh bin/server_stop.sh
+```
+
+### ShardingSphere-Proxy
+
+```
+sh bin/stop.sh
+```
+
 ## Configuration
 
- The existing configuration items are as follows, We can modify them in `conf/server.yaml`：
- 
+### ShardingSphere-Scaling
+
+The existing configuration items are as follows, we can modify them in `conf/server.yaml`:
+
 | Name           | Description                                                                               | Default value |
 | -------------- | ----------------------------------------------------------------------------------------- | ------------- |
 | port           | Listening port of HTTP server                                                             | 8888          |
 | blockQueueSize | Queue size of data transmission channel                                                   | 10000         |
 | workerThread   | Worker thread pool size, the number of migration task threads allowed to run concurrently | 30            |
-| resumeBreakPoint   | Resume from break-point service                                                       |               |
diff --git a/docs/document/content/user-manual/shardingsphere-scaling/usage.cn.md b/docs/document/content/user-manual/shardingsphere-scaling/usage.cn.md
index 0575b32cda..3c4c7f2e07 100644
--- a/docs/document/content/user-manual/shardingsphere-scaling/usage.cn.md
+++ b/docs/document/content/user-manual/shardingsphere-scaling/usage.cn.md
@@ -31,6 +31,7 @@ MySQL 需要开启 `binlog`，`binlog format` 为Row模式，且迁移时所使
 +-----------------------------------------+---------------------------------------+
 | log_bin                                 | ON                                    |
 | binlog_format                           | ROW                                   |
+| binlog_row_image                        | FULL                                  |
 +-----------------------------------------+---------------------------------------+
 
 +------------------------------------------------------------------------------+
@@ -68,7 +69,7 @@ PostgreSQL 需要开启 [test_decoding](https://www.postgresql.org/docs/9.4/test
 
 *** 注意 ***
 
-当前 source type 必须是 shardingSphereJdbc
+当前 source type 和 target type 必须是 shardingSphereJdbc
 
 示例：
 
diff --git a/docs/document/content/user-manual/shardingsphere-scaling/usage.en.md b/docs/document/content/user-manual/shardingsphere-scaling/usage.en.md
index bf35ee6331..42e9497e74 100644
--- a/docs/document/content/user-manual/shardingsphere-scaling/usage.en.md
+++ b/docs/document/content/user-manual/shardingsphere-scaling/usage.en.md
@@ -10,7 +10,7 @@ weight = 2
 
 JAVA，JDK 1.8+.
 
-The migration scene we support：
+The migration scene we support:
 
 | Source                     | Target          | Support |
 | -------------------------- | -------------------- | ------- |
@@ -31,6 +31,7 @@ MySQL need to open `binlog`, and `binlog format` should be Row model. Privileges
 +-----------------------------------------+---------------------------------------+
 | log_bin                                 | ON                                    |
 | binlog_format                           | ROW                                   |
+| binlog_row_image                        | FULL                                  |
 +-----------------------------------------+---------------------------------------+
 
 +------------------------------------------------------------------------------+
@@ -49,7 +50,7 @@ ShardingSphere-Scaling provides a simple HTTP API
 
 #### Start scaling job
 
-Interface description：POST /scaling/job/start
+Interface description: POST /scaling/job/start
 
 Body:
 
@@ -68,9 +69,9 @@ Data source configuration:
 
 *** Notice ***
 
-Currently source type must shardingSphereJdbc
+Currently, source type and target type must be shardingSphereJdbc
 
-Example：
+Example:
 
 ```
 curl -X POST \
@@ -175,7 +176,7 @@ curl -X POST \
       }'
 ```
 
-Response：
+Response:
 
 ```
 {
@@ -188,15 +189,15 @@ Response：
 
 #### Get scaling progress
 
-Interface description：GET /scaling/job/progress/{jobId}
+Interface description: GET /scaling/job/progress/{jobId}
 
-Example：
+Example:
 ```
 curl -X GET \
   http://localhost:8888/scaling/job/progress/1
 ```
 
-Response：
+Response:
 ```
 {
    "success": true,
@@ -250,15 +251,15 @@ Response：
 
 #### List scaling jobs
 
-Interface description：GET /scaling/job/list
+Interface description: GET /scaling/job/list
 
-Example：
+Example:
 ```
 curl -X GET \
   http://localhost:8888/scaling/job/list
 ```
 
-Response：
+Response:
 
 ```
 {
@@ -276,20 +277,20 @@ Response：
 
 #### Stop scaling job
 
-Interface description：GET /scaling/job/stop
+Interface description: GET /scaling/job/stop
 
-Body：
+Body:
 
 | Parameter | Describe |
 | --------- | -------- |
 | jobId     | job id   |
 
-Example：
+Example:
 ```
 curl -X GET \
   http://localhost:8888/scaling/job/stop/1
 ```
-Response：
+Response:
 ```
 {
    "success": true,
